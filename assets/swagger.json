{
    "swagger": "2.0",
    "info": {
	"title": "PCS Portal API ({ENV})",
	"description": "PCS Portal Backend API",
	"version": "1.0.0"
    },
    "host": "{HOST}",
    "schemes": [
	"https"
    ],
    "basePath": "{BASE}",
    "produces": [
	"application/json"
    ],
    "paths": {
	"/profile": {
	    "post": {
		"summary": "get current profile info",
		"description": "get currnt profile information.\n",
		"tags": [
		    "Profile"
		],
		"parameters": [
		    {
			"name": "email",
			"in": "body",
			"required": true,
			"type": "string"
		    },
		    {
			"name": "token",
			"in": "body",
			"required": true,
			"type": "string",
			"description":"token from predix.io UAA"
		    }
		],
		"responses": {
		    "200": {
			"description": "successful retrieve current profile",
			"schema": {
			    "type": "array",
			    "items": {
				"type": "object",
				"$ref": "#/definitions/Profile"
			    }
			}
		    }
		}
	    }
	},
	"/application/list/{profileId}": {
	    "get": {
		"summary": "get the application list by profileId",
		"description": "get the list of applications by profileId.\n",
		"tags": [
		    "Application"
		],
		"parameters": [
		    {
			"name": "profileId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "An array of application",
			"schema": {
			    "type": "array",
			    "items": {
				"type": "object",
				"$ref": "#/definitions/Application"
			    }
			}
		    }
		}
	    }
	},
	"/application/draft/list/{profileId}": {
	    "get": {
		"summary": "get the draft list by profileId",
		"description": "get the list of applications by profileId.\n",
		"tags": [
		    "Application"
		],
		"parameters": [
		    {
			"name": "profileId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "An array of application",
			"schema": {
			    "type": "array",
			    "items": {
				"type": "object",
				"$ref": "#/definitions/Application"
			    }
			}
		    }
		}
	    }
	},
	"/application/draft/{applicationId}": {
	    "delete": {
		"summary": "delete a draft",
		"description": "delete an existing draft.",
		"tags": [
		    "Application"
		],
		"parameters": [
		    {
			"name": "applicationId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "delete successful.",
			"type": "string"
		    },
		    "default": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }
	},
	"/application":{
	    "post": {
		"summary": "create an appliaction draft",
		"description": "create a new draft.\n",
		"tags": [
		    "Application"
		],
		"parameters": [
		    {
			"name": "body",
			"in": "body",
			"schema": {
			    "type": "object",
			    "properties": {
				"profileId": {
				    "type": "string"
				},
				"name": {
				    "type": "string"
				},
				"answers": {
				    "type": "object",
				    "properties": {
					"questionId": {
					    "type": "object",
					    "$ref": "#/definitions/Answer"
					}
				    }
				},
				"notification": {
				    "type": "object",
				    "$ref": "#/definitions/Notification"
				},
				"status": {
				    "type": "string"
				}
			    }
			}
		    }
		],
		"responses": {
		    "200": {
			"description": "successful create an application",
			"schema": {
			    "type": "object",
			    "$ref": "#/definitions/Application"
			}
		    }
		}
	    },
	    "put": {
		"summary": "update an application draft",
		"description": "update an application draft.\n",
		"tags": [
		    "Application"
		],
		"parameters": [
		    {
			"name": "body",
			"in": "body",
			"schema": {
			    "type": "object",
			    "$ref": "#/definitions/Application"
			}
		    }	
		],
		"responses": {
		    "200": {
			"description": "successful update an application",
			"schema": {
			    "type": "object",
			    "$ref":"#/definitions/Application"
			}
		    },
		    "501": {
			"description": "Unexpected error",
			"schema": {
			    "type":"object",
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }

	},
	"/application/{appId}": {
	    "delete": {
		"summary": "delete an application",
		"description": "delete an existing application.",
		"tags": [
		    "Application"
		],
		"parameters": [
		    {
			"name": "appId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "delete successful.",
			"type": "string"
		    },
		    "default": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }
	},
	"/application/submit": {
	    "post": {
		"summary": "submit an application",
		"description": "submit an existing application.",
		"tags": [
		    "Application"
		],
		"parameters": [
		    {
			"name": "body",
			"in": "body",
			"schema": {
			    "type": "object",
			    "$ref": "#/definitions/Application"
			}
		    }	
		],
		"responses": {
		    "200": {
			"description": "successful submitted an application",
			"schema": {
			    "type": "object",
			    "$ref":"#/definitions/Application"
			}
		    },
		    "default": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }
	},
	"/question/list": {
	    "get": {
		"summary": "get the question list",
		"description": "Just get the list of the current questions.\n",
		"tags": [
		    "Questionnaire"
		],
		"responses": {
		    "200": {
			"description": "An array of questionnaire",
			"schema": {
			    "type": "array",
			    "items": {
				"type": "object",
				"$ref": "#/definitions/Question"
			    }
			}
		    }
		}
	    }
	},
	"/question/list/{questionTypeId}": {
	    "get": {
		"summary": "get questions by Question TypeId",
		"description": "get questions by Question TypeId.",
		"tags": [
		    "Questionnaire"
		],
		"parameters": [
		    {
			"name": "questionTypeId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "retrieve successful.",
			"schema": {
			    "type": "array",
			    "items": {
				"type": "object",
				"$ref": "#/definitions/Question"
			    }
			}
		    },
		    "default": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }
	},
	"/question": {
	    "post": {
		"summary": "create a question",
		"description": "Create a new question.",
		"tags": [
		    "Questionnaire"
		],
		"parameters": [
		    {
			"name": "body",
			"in": "body",
			"schema": {
			    "type": "object",
			    "properties": {
				"title": {
				    "type": "string"
				},
				"name": {
				    "type": "string"
				},
				"description": {
				    "type": "string"
				},
				"type": {
				    "type": "integer"
				},
				"answerOptions": {
				    "type": "object"
				}
			    }
			}
		    }
		],
		"responses": {
		    "200": {
			"description": "Question details",
			"schema": {
			    "type": "object",
			    "$ref": "#/definitions/Question"
			}
		    },
		    "default": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    },
	    "put": {
		"summary": "update a question",
		"description": "update an existing question.",
		"tags": [
		    "Questionnaire"
		],
		"parameters": [
		    {
			"name": "body",
			"in": "body",
			"schema": {
			    "$ref": "#/definitions/Question",
			    "type": "object"
			}
		    }
		],
		"responses": {
		    "200": {
			"description": "Question details",
			"schema": {
			    "type": "object",
			    "$ref": "#/definitions/Question"
			}
		    },
		    "default": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }
	},
	"/question/{questionId}": {
	    "delete": {
		"summary": "delete a question",
		"description": "delete an existing question.",
		"tags": [
		    "Questionnaire"
		],
		"parameters": [
		    {
			"name": "questionId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "delete successful.",
			"type": "string"
		    },
		    "default": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }
	},
	"/questiontype/list": {
	    "get": {
		"summary": "Question Types",
		"description": "Get question types.",
		"tags": [
		    "Question Type"
		],
		"responses": {
		    "200": {
			"description": "An object of question type.",
			"schema": {
			    "type": "object",
			    "properties": {
				"question_type_id": {
				    "type": "string"
				}
			    }
			}
		    },
		    "503": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }
	},
	"/document/list": {
	    "get": {
		"summary": "get a list of documents",
		"description": "get a list of documents to the current profile.\n",
		"tags": [
		    "Document"
		],
		"responses": {
		    "200": {
			"description": "successful retrieve current profile",
			"schema": {
			    "type": "array",
			    "items": {
				"type": "object",
				"$ref": "#/definitions/Document"
			    }
			}
		    }
		}
	    }
	},
	"/document": {
	    "post": {
		"summary": "create a document",
		"description": "create a new document.\n",
		"tags": [
		    "Document"
		],
		"responses": {
		    "200": {
			"description": "successful retrieve current profile",
			"schema": {
			    "type": "object",
			    "$ref": "#/definitions/Document"
			}
		    }
		}
	    }
	},
	"/document/{docId}": {
	    "get": {
		"summary": "download a document",
		"description": "download a document.\n",
		"tags": [
		    "Document"
		],
		"parameters": [
		    {
			"name": "docId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "successful retrieve current profile",
			"schema": {
			    "type": "object"
			}
		    }
		}
	    },
	    "delete": {
		"summary": "delete a document",
		"description": "delete a document.\n",
		"tags": [
		    "Document"
		],
		"parameters": [
		    {
			"name": "docId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "successful delete a document",
			"schema": {
			    "type": "object",
			    "properties": {
				"message": {
				    "type": "string"
				}
			    }
			}
		    },
		    "501": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    },
	    "put": {
		"summary": "update a document",
		"description": "update a document.\n",
		"tags": [
		    "Document"
		],
		"parameters": [
		    {
			"name": "docId",
			"in": "path",
			"required": true,
			"type": "string"
		    }
		],
		"responses": {
		    "200": {
			"description": "successful update a document",
			"schema": {
			    "type": "object",
			    "properties": {
				"message": {
				    "type": "string"
				}
			    }
			}
		    },
		    "501": {
			"description": "Unexpected error",
			"schema": {
			    "$ref": "#/definitions/Error"
			}
		    }
		}
	    }
	},
	"/email": {
	    "post": {
		"summary": "send an email",
		"description": "send an email.\n",
		"tags": [
		    "Email"
		],
		
		"parameters": [
		    {
			"name": "body",
			"in": "body",
			"schema": {
			    "type": "object",
			    "$ref": "#/definitions/Email"
			}
		    }	
		],
		"responses": {
		    "200": {
			"description": "successful retrieve current profile"
			
		    }
		}
	    }
	}
    },
    "definitions": {
	"Application": {
	    "type": "object",
	    "properties": {
		"_id": {
		    "type": "string"
		},
		"profileId": {
		    "type": "string"
		},
		"name": {
		    "type": "string"
		},
		"notification":{
		    "type": "object",
		    "$ref": "#/definitions/Notification"
		},
		"created_date":{
		    "type": "string",
		    "format":"date-time"
		},
		"modified_date":{
		    "type": "string",
		    "format":"date-time"
		},
		"modified_by":{
		    "type": "string"
		},
		"answers": {
		    "type": "object",
		    "properties": {
			"questionId": {
			    "type": "object",
			    "$ref": "#/definitions/Answer"
			}
		    }
		},
		"status": {
		    "type": "string"
		}
	    }
	},
	"Question": {
	    "type": "object",
	    "properties": {
		"_id": {
		    "type": "string"
		},
		"title": {
		    "type": "string"
		},
		"name": {
		    "type": "string"
		},
		"description": {
		    "type": "string"
		},
		"type": {
		    "type": "string"
		},
		"answerOptions": {
		    "type": "object"
		}
	    }
	},
	"Notification": {
	    "type": "object",
	    "properties": {
		"_questionTypeId": {
		    "type": "array",
		    "items":{
			"type": "string",
			"description":"email"
		    }
		}
	    }
	},
	"Answer": {
	    "type": "object",
	    "properties": {
		"_id": {
		    "type": "string"
		},
		"_questionid": {
		    "type": "string"
		},
		"_appid": {
		    "type": "string"
		},
		"answer": {
		    "type": "object"
		},
		"fileList": {
		    "type": "array",
		    "items": {
			"type": "object",
			"$ref": "#/definitions/Document"
		    }
		}
	    }
	},
	"Document": {
	    "type": "object",
	    "properties": {
		"_did": {
		    "type": "string"
		}
	    }
	},
	"Profile": {
	    "type": "object",
	    "properties": {
		"_pid": {
		    "type": "string"
		},
		"name": {
		    "type": "string"
		},
		"email": {
		    "type": "string"
		},
		"sfdcid": {
		    "type": "string"
		}
	    }
	},
	"Error": {
	    "type": "object",
	    "properties": {
		"code": {
		    "type": "integer",
		    "format": "int32"
		},
		"message": {
		    "type": "string"
		},
		"fields": {
		    "type": "string"
		}
	    }
	},
	"Email":{
	    "type":"object",
	    "properties":{
		"from":{
		    "type":"string"
		},
		"to":{
		    "type":"string"
		},
		"cc":{
		    "type":"string"
		},
		"bcc":{
		    "type":"string"
		},
		"subject":{
		    "type":"string"
		},
		"msg":{
		    "type":"string"
		},
		"attachment":{
		    "type":"array",
		    "items":{
			"type":"string",
			"description":"docId"
		    }
		}
	    }
	}
    }
}
